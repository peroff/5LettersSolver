package main

import (
	"fmt"
	"strings"
)

var (
	allFixedCharsResp = strings.Repeat(string(fixedCharResp), wordLen)
	allBadCharsResp   = strings.Repeat(string(badCharResp), wordLen)
	allDeadCharsResp  = strings.Repeat(string(deadCharResp), wordLen)
)

var base *wordsBase

type gameTry struct {
	try  string
	resp string
}

type gameSession struct {
	secret string
	tries  []gameTry
}

var testSessions = []gameSession{
	{
		"сауна",
		[]gameTry{
			{
				"норка",
				".---+",
			},
			{
				"спирт",
				"+----",
			},
			{
				"смена",
				"+--++",
			},
		},
	},
	{
		"седло",
		[]gameTry{
			{
				"гогот",
				"-.---", // важно! "о" - сначала точка, потом минус
			},
			{
				"норка",
				"-.---",
			},
			{
				"спирт",
				"+----",
			},
			{
				"сусло",
				"+--++", // важно! "с" - плюс, потом минус
			},
		},
	},
	{
		"улица",
		[]gameTry{
			{
				"гогот",
				"-----",
			},
			{
				"норка",
				"----+",
			},
			{
				"спирт",
				"--+--",
			},
			{
				"дележ",
				"--.--",
			},
			{
				"мачта",
				"----+", // важно! "а" - минус, потом плюс
			},
		},
	},
	{
		"салон",
		[]gameTry{
			{
				"норка",
				"..--.",
			},
			{
				"спирт",
				"+----",
			},
			{
				"загон",
				"-+-++",
			},
		},
	},
	{
		"квота",
		[]gameTry{
			{
				"норка",
				"-.-.+",
			},
			{
				"спирт",
				"----.",
			},
			{
				"штора",
				"-.+-+",
			},
		},
	},
	{
		"обвал",
		[]gameTry{
			{
				"норка",
				"-.--.",
			},
			{
				"спирт",
				"-----",
			},
			{
				"омега",
				"+---.",
			},
			{
				"оклад",
				"+-.+-",
			},
		},
	},
	{
		"звено",
		[]gameTry{
			{
				"норка",
				"..---",
			},
			{
				"спирт",
				"-----",
			},
			{
				"дупло",
				"----+",
			},
			{
				"вызов",
				".-..-",
			},
		},
	},
	{
		"факир",
		[]gameTry{
			{
				"норка",
				"--...",
			},
			{
				"спирт",
				"--..-",
			},
			{
				"парик",
				"-+.+.",
			},
		},
	},
	{
		"нутро",
		[]gameTry{
			{
				"норка",
				"+..--",
			},
			{
				"спирт",
				"---+.",
			},
		},
	},
	{
		"рулет",
		[]gameTry{
			{
				"норка",
				"--.--",
			},
			{
				"спирт",
				"---.+",
			},
			{
				"редис",
				"+.---",
			},
			{
				"муляж",
				"-++--",
			},
		},
	},
	{
		"ловец",
		[]gameTry{
			{
				"гогот",
				"-+---",
			},
			{
				"норка",
				"-+---",
			},
			{
				"спирт",
				"-----",
			},
			{
				"дележ",
				"--.+-",
			},
		},
	},
	{
		"ездок",
		[]gameTry{
			{
				"гогот",
				"---+-",
			},
			{
				"норка",
				"-.-.-",
			},
			{
				"спирт",
				"-----",
			},
			{
				"дележ",
				"..---", // важно! "е" - точка, потом минус
			},
		},
	},
	{
		"туман",
		[]gameTry{
			{
				"норка",
				".---.",
			},
			{
				"спирт",
				"----.",
			},
			{
				"телец",
				"+----",
			},
			{
				"манка",
				"...--",
			},
		},
	},
	{
		"запас",
		[]gameTry{
			{
				"норка",
				"----.",
			},
			{
				"спирт",
				"..---",
			},
			{
				"палас",
				".+-++",
			},
			{
				"аббат",
				".--+-",
			},
			{
				"соска",
				".---.",
			},
		},
	},
	{
		"запас",
		[]gameTry{
			{
				"аббба",
				".---.",
			},
			{
				"бббба",
				"----.",
			},
		},
	},
	{
		"abcde",
		[]gameTry{
			{
				"ezzzz",
				".----",
			},
			{
				"zzzza",
				"----.",
			},
			{
				"eabcd",
				".....",
			},
			{
				"zbzbb",
				"-+---",
			},
			{
				"ccccc",
				"--+--",
			},
			{
				"cczzz",
				".----",
			},
			{
				"zzzcc",
				"---.-",
			},
		},
	},
	{
		"aabbb",
		[]gameTry{
			{
				"zaazz",
				"-+.--",
			},
			{
				"zaaaz",
				"-+.--",
			},
			{
				"zzaaa",
				"--..-",
			},
		},
	},
	{
		"aaabb",
		[]gameTry{
			{
				"bzzzz",
				".----",
			},
			{
				"bbzzz",
				"..---",
			},
			{
				"bbbzz",
				"..---",
			},
			{
				"bbbbz",
				".--+-",
			},
		},
	},
}

func init() {
	var err error
	base, err = loadBase("words.txt")
	if err != nil {
		panic(fmt.Sprintf("Words base loading error: %s", err))
	}
}
